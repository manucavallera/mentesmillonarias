<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crea tu tienda gratis - Mentes Millonarias</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts - Premium -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        /* Mentes Millonarias - Gold Palette */
        --jade-primary: #d4af37;
        --jade-secondary: #0a0a0a;
        --jade-success: #d4af37;
        --jadebro-primary: #d4af37;
        --jadebro-secondary: #cfb53b;

        /* Extended Gold Palette */
        --gold-primary: #d4af37;
        --gold-light: #f4e5b2;
        --gold-dark: #aa8a2e;
        --gold-metallic: #cfb53b;

        /* Dark Luxury */
        --dark-primary: #0a0a0a;
        --dark-secondary: #1a1a1a;
        --dark-tertiary: #2a2a2a;

        /* Accent Colors */
        --platinum: #e5e4e2;
        --champagne: #f7e7ce;
      }

      * {
        font-family: "Poppins", "Inter", -apple-system, BlinkMacSystemFont,
          sans-serif;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Playfair Display", "Space Grotesk", -apple-system,
          BlinkMacSystemFont, sans-serif;
      }

      body {
        background: linear-gradient(
          135deg,
          var(--jade-secondary) 0%,
          #2d3748 100%
        );
        min-height: 100vh;
        padding: 2rem 0;
      }

      .main-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .step-header {
        text-align: center;
        color: white;
        margin-bottom: 3rem;
      }

      .step-indicator {
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
      }

      .step {
        display: flex;
        align-items: center;
        color: rgba(255, 255, 255, 0.6);
      }

      .step.active {
        color: var(--jade-primary);
      }

      .step-number {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        font-weight: bold;
      }

      .step.active .step-number {
        background: var(--jade-primary);
        color: white;
      }

      .plan-card {
        background: white;
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        border: 3px solid transparent;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        height: 100%;
      }

      .plan-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 212, 170, 0.2);
      }

      .plan-card.selected {
        border-color: var(--jade-primary);
        box-shadow: 0 0 0 1px var(--jade-primary);
      }

      .plan-card.popular {
        border-color: var(--jade-primary);
      }

      .plan-badge {
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--jade-primary);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: bold;
      }

      .plan-badge.jadebro {
        background: linear-gradient(
          135deg,
          var(--jadebro-primary),
          var(--jadebro-secondary)
        );
      }

      .registration-card {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header-section {
        background: linear-gradient(
          135deg,
          var(--jade-primary),
          var(--jade-success)
        );
        color: white;
        padding: 2rem;
        text-align: center;
      }

      .form-section {
        padding: 2rem;
      }

      .preview-url {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        padding: 0.375rem 0.75rem;
        display: flex;
        align-items: center;
        margin-top: 0.5rem;
      }

      .preview-url .base-url {
        color: #6c757d;
        font-weight: 500;
      }

      .preview-url .user-slug {
        color: var(--jade-success);
        font-weight: bold;
        min-width: 100px;
      }

      .country-select {
        width: 80px;
        border-right: 1px solid #dee2e6;
        border-radius: 0.375rem 0 0 0.375rem;
      }

      .phone-input {
        border-radius: 0 0.375rem 0.375rem 0;
        border-left: 0;
      }

      .feature-badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.875rem;
        margin: 0.25rem;
        display: inline-block;
      }

      .btn-create {
        background: linear-gradient(
          135deg,
          var(--jade-primary),
          var(--jade-success)
        );
        border: none;
        padding: 0.75rem 2rem;
        font-weight: 600;
        border-radius: 0.5rem;
        transition: transform 0.2s;
        color: white;
      }

      .btn-create:hover {
        transform: translateY(-2px);
        background: linear-gradient(135deg, var(--jade-success), #047857);
        color: white;
      }

      .btn-continue {
        background: var(--jade-primary);
        border: none;
        padding: 1rem 3rem;
        font-weight: 600;
        border-radius: 0.5rem;
        color: white;
        font-size: 1.1rem;
      }

      .btn-continue:hover {
        background: var(--jade-success);
        color: white;
      }

      .jadebro-gradient {
        background: linear-gradient(
          135deg,
          var(--jadebro-primary),
          var(--jadebro-secondary)
        );
        color: white;
      }

      .hidden {
        display: none !important;
      }

      .plan-price {
        font-size: 2rem;
        font-weight: bold;
        color: var(--jade-primary);
        margin: 1rem 0;
      }

      .plan-price.jadebro {
        background: linear-gradient(
          135deg,
          var(--jadebro-primary),
          var(--jadebro-secondary)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .selected-plan-info {
        background: #f8f9fa;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
        border-left: 4px solid var(--jade-primary);
      }

      /* ========================================
   RESPONSIVE - LANDING DE REGISTRO
   ======================================== */

      /* ===== M√ìVIL (hasta 768px) ===== */
      @media (max-width: 768px) {
        /* ========== BODY Y CONTAINERS ========== */
        body {
          padding: 1rem 0;
        }

        .main-container {
          padding: 0 0.75rem;
        }

        /* ========== STEP INDICATOR ========== */
        .step-indicator {
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          gap: 0.5rem;
        }

        .step {
          font-size: 14px;
        }

        .step-number {
          width: 35px;
          height: 35px;
          font-size: 14px;
          margin-right: 0.5rem;
        }

        .step span {
          display: none; /* Ocultar texto en m√≥vil */
        }

        .step::after {
          content: attr(data-label);
          display: block;
          position: absolute;
          bottom: -20px;
          left: 50%;
          transform: translateX(-50%);
          font-size: 11px;
          white-space: nowrap;
        }

        /* ========== HEADERS ========== */
        .step-header h1 {
          font-size: 2rem;
          margin-bottom: 1rem;
        }

        .step-header p {
          font-size: 1rem;
        }

        /* ========== PLAN CARDS ========== */
        .row.g-4 {
          gap: 1rem !important;
        }

        .plan-card {
          padding: 1.25rem;
          margin-bottom: 1rem;
        }

        .plan-card h4 {
          font-size: 1.25rem;
        }

        .plan-price {
          font-size: 1.5rem;
        }

        .plan-price small {
          font-size: 0.75rem;
          display: block;
        }

        .plan-card ul {
          font-size: 14px;
        }

        .plan-card li {
          margin-bottom: 0.75rem !important;
        }

        .plan-badge {
          font-size: 0.75rem;
          padding: 0.35rem 0.75rem;
          top: -8px;
        }

        /* ========== BOT√ìN CONTINUAR ========== */
        .btn-continue {
          padding: 0.875rem 2rem;
          font-size: 1rem;
          width: 100%;
        }

        /* ========== FORMULARIO ========== */
        .registration-card {
          margin: 0 -0.75rem;
          border-radius: 0;
        }

        .header-section {
          padding: 1.5rem 1rem;
        }

        .header-section h2 {
          font-size: 1.5rem;
        }

        .header-section p {
          font-size: 0.95rem;
        }

        .form-section {
          padding: 1.25rem 1rem;
        }

        /* ========== SELECTED PLAN INFO ========== */
        .selected-plan-info {
          padding: 0.75rem;
          font-size: 14px;
        }

        .selected-plan-info .btn-sm {
          font-size: 12px;
          padding: 0.35rem 0.75rem;
        }

        /* ========== FEATURE BADGES ========== */
        .feature-badge {
          font-size: 0.75rem;
          padding: 0.2rem 0.6rem;
          margin: 0.15rem;
        }

        /* ========== INPUTS ========== */
        .form-control-lg {
          font-size: 1rem;
          padding: 0.75rem;
        }

        .form-control,
        .form-select {
          font-size: 14px;
          min-height: 44px;
        }

        .form-label {
          font-size: 14px;
          margin-bottom: 0.4rem;
        }

        .form-text {
          font-size: 12px;
        }

        /* ========== PREVIEW URL ========== */
        .preview-url {
          flex-direction: column;
          align-items: flex-start;
          padding: 0.5rem;
          gap: 0.25rem;
        }

        .preview-url .base-url {
          font-size: 12px;
        }

        .preview-url .user-slug {
          font-size: 14px;
          min-width: auto;
          word-break: break-all;
        }

        /* ========== WHATSAPP INPUT ========== */
        .country-select {
          width: 90px;
          font-size: 13px;
        }

        .phone-input {
          font-size: 14px;
        }

        /* ========== SLUG STATUS ========== */
        .slug-status {
          font-size: 12px;
        }

        .slug-status i {
          font-size: 11px;
        }

        /* ========== BOT√ìN CREAR ========== */
        .btn-create {
          padding: 0.875rem 1.5rem;
          font-size: 1rem;
        }

        .btn-create i {
          font-size: 0.95rem;
        }

        #btnSpinner .spinner-border-sm {
          width: 1rem;
          height: 1rem;
        }

        /* ========== FOOTER LINKS ========== */
        .registration-card .text-center.mt-4 {
          padding: 1rem 0.5rem;
        }

        .registration-card .text-center.mt-4 p {
          font-size: 14px;
        }

        /* ========== T√âRMINOS Y CONDICIONES ========== */
        .form-check-label {
          font-size: 13px;
        }

        .form-check-label a {
          word-break: break-word;
        }

        /* ========== OPTIMIZACIONES T√ÅCTILES ========== */
        .btn {
          min-height: 44px;
        }

        .form-check-input {
          width: 20px;
          height: 20px;
        }

        /* ========== SCROLLBAR ========== */
        .plan-card ul {
          max-height: 300px;
          overflow-y: auto;
        }

        .plan-card ul::-webkit-scrollbar {
          width: 4px;
        }

        .plan-card ul::-webkit-scrollbar-track {
          background: #f1f5f9;
        }

        .plan-card ul::-webkit-scrollbar-thumb {
          background: var(--jade-primary);
          border-radius: 2px;
        }
      }

      /* ===== TABLET (769px - 991px) ===== */
      @media (min-width: 769px) and (max-width: 991px) {
        .plan-card {
          padding: 1.5rem;
        }

        .plan-price {
          font-size: 1.75rem;
        }

        .btn-continue {
          padding: 0.875rem 2.5rem;
        }
      }

      /* ===== PEQUE√ëO (576px o menos) ===== */
      @media (max-width: 576px) {
        .step-header h1 {
          font-size: 1.75rem;
        }

        .plan-price {
          font-size: 1.35rem;
        }

        .plan-card ul {
          font-size: 13px;
        }

        .header-section h2 {
          font-size: 1.35rem;
        }

        .btn-create,
        .btn-continue {
          padding: 0.75rem 1.25rem;
          font-size: 0.95rem;
        }
      }

      /* ===== LANDSCAPE M√ìVIL ===== */
      @media (max-width: 768px) and (orientation: landscape) {
        body {
          padding: 0.5rem 0;
        }

        .step-header {
          margin-bottom: 1.5rem;
        }

        .step-header h1 {
          font-size: 1.5rem;
        }

        .plan-card {
          padding: 1rem;
        }
      }

      /* ===== ACCESIBILIDAD ===== */
      @media (max-width: 768px) {
        /* √Årea t√°ctil m√≠nima */
        button,
        a.btn,
        .form-check-input,
        .form-control,
        .form-select {
          min-height: 44px;
        }

        /* Contraste mejorado para focus */
        .form-control:focus,
        .form-select:focus {
          outline: 2px solid var(--jade-primary);
          outline-offset: 2px;
        }
      }

      /* ===== ANIMACIONES SUAVES ===== */
      @media (max-width: 768px) {
        .plan-card {
          transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .plan-card:active {
          transform: scale(0.98);
        }

        .btn-continue,
        .btn-create {
          transition: transform 0.1s ease;
        }

        .btn-continue:active,
        .btn-create:active {
          transform: scale(0.97);
        }
      }

      /* ==================== MENTES MILLONARIAS PREMIUM STYLES ==================== */

      /* Pattern Background */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            45deg,
            transparent 48%,
            rgba(212, 175, 55, 0.03) 49%,
            rgba(212, 175, 55, 0.03) 51%,
            transparent 52%
          ),
          linear-gradient(
            -45deg,
            transparent 48%,
            rgba(212, 175, 55, 0.03) 49%,
            rgba(212, 175, 55, 0.03) 51%,
            transparent 52%
          );
        background-size: 60px 60px;
        z-index: 0;
        pointer-events: none;
      }

      /* Part√≠culas flotantes */
      .particles-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
      }

      .particle {
        position: absolute;
        background: radial-gradient(circle, var(--gold-primary), transparent);
        border-radius: 50%;
        opacity: 0;
        animation: float-particle 15s infinite ease-in-out;
      }

      @keyframes float-particle {
        0% {
          transform: translateY(100vh) translateX(0) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
        }
        90% {
          opacity: 0.3;
        }
        100% {
          transform: translateY(-100vh) translateX(100px) scale(1);
          opacity: 0;
        }
      }

      /* Main container z-index */
      .main-container {
        position: relative;
        z-index: 10;
      }

      /* Step header premium */
      .step-header h1 {
        background: linear-gradient(
          135deg,
          var(--gold-light),
          var(--gold-primary),
          var(--gold-dark)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        filter: drop-shadow(0 0 30px rgba(212, 175, 55, 0.3));
      }

      /* Step indicator dorado */
      .step {
        color: rgba(229, 228, 226, 0.5);
      }

      .step.active {
        color: var(--gold-primary);
      }

      .step-number {
        border: 2px solid rgba(212, 175, 55, 0.3);
        background: rgba(42, 42, 42, 0.8);
      }

      .step.active .step-number {
        background: linear-gradient(
          135deg,
          var(--gold-primary),
          var(--gold-metallic)
        );
        border-color: var(--gold-primary);
        color: var(--dark-primary);
        box-shadow: 0 10px 30px rgba(212, 175, 55, 0.5);
      }

      /* Plan cards premium */
      .plan-card {
        background: linear-gradient(
          145deg,
          rgba(26, 26, 26, 0.95),
          rgba(42, 42, 42, 0.9)
        );
        border: 2px solid rgba(212, 175, 55, 0.2);
        backdrop-filter: blur(10px);
      }

      .plan-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          var(--gold-primary),
          var(--gold-metallic),
          var(--gold-primary)
        );
        background-size: 200% 100%;
        animation: shimmer-border 3s linear infinite;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      @keyframes shimmer-border {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }

      .plan-card:hover::before,
      .plan-card.selected::before {
        opacity: 1;
      }

      .plan-card:hover {
        border-color: var(--gold-primary);
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.6),
          0 0 80px rgba(212, 175, 55, 0.3);
      }

      .plan-card.selected {
        border: 3px solid var(--gold-primary);
        background: linear-gradient(
          145deg,
          rgba(42, 42, 42, 0.98),
          rgba(26, 26, 26, 0.95)
        );
        box-shadow: 0 30px 70px rgba(0, 0, 0, 0.6),
          0 0 100px rgba(212, 175, 55, 0.4);
      }

      .plan-card h4 {
        color: var(--gold-primary);
      }

      .plan-card p,
      .plan-card ul,
      .plan-card li {
        color: var(--platinum) !important;
      }

      .plan-card .text-muted {
        color: var(--champagne) !important;
      }

      .plan-card .text-success {
        color: var(--gold-primary) !important;
      }

      .plan-price {
        background: linear-gradient(
          135deg,
          var(--gold-light),
          var(--gold-primary)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .plan-price.jadebro {
        background: linear-gradient(
          135deg,
          var(--gold-light),
          var(--gold-primary),
          var(--gold-dark)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .plan-badge {
        background: linear-gradient(
          135deg,
          var(--gold-primary),
          var(--gold-metallic)
        );
        color: var(--dark-primary);
        box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
      }

      /* Registration card premium */
      .registration-card {
        background: linear-gradient(
          145deg,
          rgba(26, 26, 26, 0.95),
          rgba(42, 42, 42, 0.9)
        );
        border: 2px solid rgba(212, 175, 55, 0.3);
        backdrop-filter: blur(10px);
      }

      .registration-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(
          90deg,
          var(--gold-primary),
          var(--gold-metallic),
          var(--gold-primary)
        );
        background-size: 200% 100%;
        animation: shimmer-border 3s linear infinite;
      }

      .header-section {
        background: linear-gradient(
          135deg,
          rgba(42, 42, 42, 0.9),
          rgba(26, 26, 26, 0.9)
        );
        border-bottom: 1px solid rgba(212, 175, 55, 0.2);
      }

      .header-section h2 {
        background: linear-gradient(
          135deg,
          var(--gold-light),
          var(--gold-primary)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Form elements premium */
      .form-label {
        color: var(--champagne);
      }

      .form-control,
      .form-select {
        background: rgba(42, 42, 42, 0.8);
        border: 1px solid rgba(212, 175, 55, 0.3);
        color: var(--platinum);
      }

      .form-control:focus,
      .form-select:focus {
        background: rgba(42, 42, 42, 0.95);
        border-color: var(--gold-primary);
        box-shadow: 0 0 0 0.2rem rgba(212, 175, 55, 0.25);
        color: var(--platinum);
      }

      .form-control::placeholder {
        color: rgba(229, 228, 226, 0.4);
      }

      /* Buttons premium */
      .btn-create,
      .btn-continue {
        background: linear-gradient(
          135deg,
          var(--gold-primary),
          var(--gold-metallic)
        );
        border: 2px solid var(--gold-primary);
        color: var(--dark-primary);
        box-shadow: 0 10px 40px rgba(212, 175, 55, 0.4);
      }

      .btn-create:hover,
      .btn-continue:hover {
        background: linear-gradient(
          135deg,
          var(--gold-light),
          var(--gold-primary)
        );
        border-color: var(--gold-light);
        color: var(--dark-primary);
        box-shadow: 0 15px 50px rgba(212, 175, 55, 0.6);
      }

      .btn-outline-secondary {
        border: 2px solid rgba(212, 175, 55, 0.5);
        color: var(--gold-primary);
      }

      .btn-outline-secondary:hover {
        background: rgba(212, 175, 55, 0.1);
        border-color: var(--gold-primary);
        color: var(--gold-light);
      }

      /* Selected plan info */
      .selected-plan-info {
        background: rgba(42, 42, 42, 0.8);
        border: 2px solid rgba(212, 175, 55, 0.3);
        border-left: 4px solid var(--gold-primary);
      }

      .selected-plan-info h5 {
        color: var(--gold-primary);
      }

      /* Text colors */
      .text-muted {
        color: rgba(229, 228, 226, 0.6) !important;
      }

      .text-primary {
        color: var(--gold-primary) !important;
      }

      /* Form check */
      .form-check-input {
        background-color: rgba(42, 42, 42, 0.8);
        border-color: rgba(212, 175, 55, 0.5);
      }

      .form-check-input:checked {
        background-color: var(--gold-primary);
        border-color: var(--gold-primary);
      }

      .form-check-label {
        color: var(--platinum);
      }

      .form-check-label a {
        color: var(--gold-primary);
      }

      /* Scrollbar premium */
      ::-webkit-scrollbar {
        width: 12px;
      }

      ::-webkit-scrollbar-track {
        background: var(--dark-primary);
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(
          180deg,
          var(--gold-primary),
          var(--gold-dark)
        );
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(
          180deg,
          var(--gold-light),
          var(--gold-primary)
        );
      }
    </style>
  </head>

  <body>
    <!-- Part√≠culas Doradas Flotantes -->
    <div class="particles-container" id="particles"></div>

    <div class="main-container">
      <!-- Step Indicator -->
      <div class="step-indicator">
        <div class="step active" id="stepPlan">
          <div class="step-number">1</div>
          <span>Elegir Plan</span>
        </div>
        <div class="mx-3">‚Üí</div>
        <div class="step" id="stepInfo">
          <div class="step-number">2</div>
          <span>Informaci√≥n</span>
        </div>
      </div>

      <!-- PASO 1: SELECCI√ìN DE PLAN -->
      <div id="planSelection">
        <div class="step-header">
          <h1 class="display-4 fw-bold mb-3">Elige tu plan perfecto</h1>
          <p class="fs-5 opacity-90">
            Empieza gratis y evoluciona tu negocio con planes que se adaptan a
            ti
          </p>
        </div>

        <div class="row g-4">
          <!-- Plan Gratis -->
          <div class="col-lg-3 col-md-6">
            <div class="plan-card" data-plan="gratis">
              <h4 class="fw-bold text-center mb-3">Empezar</h4>
              <div class="plan-price text-center">GRATIS</div>
              <p class="text-center text-muted">Para probar</p>

              <ul class="list-unstyled">
                <li class="mb-2">
                  <i class="fas fa-check text-success me-2"></i>Hasta 10
                  productos
                </li>
                <li class="mb-2">
                  <i class="fas fa-check text-success me-2"></i>Carrito de
                  compras
                </li>
                <li class="mb-2">
                  <i class="fas fa-check text-success me-2"></i>Integraci√≥n
                  WhatsApp
                </li>
                <li class="mb-2">
                  <i class="fas fa-check text-success me-2"></i>Control stock
                  b√°sico
                </li>
                <li class="mb-2">
                  <i class="fas fa-check text-success me-2"></i>Dominio
                  Mentes/Tienda
                </li>
              </ul>
            </div>
          </div>

          <!-- Plan Pro -->
          <div class="col-lg-3 col-md-6">
            <div class="plan-card popular" data-plan="pro">
              <div class="plan-badge">M√ÅS POPULAR</div>
              <h4
                class="fw-bold text-center mb-3"
                style="color: var(--jade-primary)"
              >
                Inicial
              </h4>
              <div class="plan-price text-center">
                $15.000 <small>ARS/mes</small>
              </div>
              <p class="text-center text-muted">USD $10</p>

              <ul class="list-unstyled">
                <li class="mb-2">
                  <i class="fas fa-check text-success me-2"></i>Tienda
                  profesional completa
                </li>
                <li class="mb-2"></li>
                <li class="mb-2">
                  <i class="fas fa-video text-success me-2"></i>Integracion
                  WhatsApp
                </li>
                <li class="mb-2"></li>
                <li class="mb-2"></li>
                <li class="mb-2">
                  <i class="fas fa-headset text-success me-2"></i>Soporte basico
                </li>
              </ul>
            </div>
          </div>

          <!-- Plan JadeBro IA -->
          <div class="col-lg-3 col-md-6">
            <div class="plan-card jadebro-gradient" data-plan="jadebro">
              <div class="plan-badge jadebro">IA POWERED</div>
              <h4 class="fw-bold text-center mb-3">
                <i class="fas fa-robot me-2"></i>Profesional
              </h4>
              <div class="plan-price text-center text-white">
                $60.000 <small>ARS/mes</small>
              </div>
              <p class="text-center opacity-75">USD $40</p>

              <ul class="list-unstyled">
                <li class="mb-2">
                  <i class="fas fa-check me-2"></i>Todo del plan inicial
                </li>
                <li class="mb-2">
                  <i class="fas fa-robot me-2"></i
                  ><strong>Productos ilimitados</strong>
                </li>
                <li class="mb-2">
                  <i class="fas fa-comments me-2"></i>Asistente IA incluido
                </li>
                <li class="mb-2"></li>
                <li class="mb-2">
                  <i class="fas fa-chart-line me-2"></i>Analytics avanzados
                </li>
                <li class="mb-2">
                  <i class="fas fa-bullhorn me-2"></i>Integracion Tiktok LIVE
                </li>
              </ul>
            </div>
          </div>

          <!-- Plan JadeBro IA MAX -->
          <div class="col-lg-3 col-md-6">
            <div class="plan-card jadebro-gradient" data-plan="jadebro-max">
              <div class="plan-badge jadebro">OMNICANAL</div>
              <h4 class="fw-bold text-center mb-3">
                <i class="fas fa-robot me-2"></i>ELITE
              </h4>
              <div class="plan-price text-center text-white">
                $140.000 <small>ARS/mes</small>
              </div>
              <p class="text-center opacity-75">USD $90</p>

              <ul class="list-unstyled">
                <li class="mb-2">
                  <i class="fas fa-check me-2"></i>Todo lo del plan profesional
                </li>
                <li class="mb-2">
                  <i class="fas fa-robot me-2"></i
                  ><strong>Mentes IA 24/7</strong>
                </li>
                <li class="mb-2">
                  <i class="fas fa-comments me-2"></i>Multiples tiendas
                </li>
                <li class="mb-2">
                  <i class="fas fa-users me-2"></i>Asesoria estrategica 1 a 1
                </li>
                <li class="mb-2">
                  <i class="fas fa-brain me-2"></i>Soporte vip 24/7
                </li>
                <li class="mb-2"></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="text-center mt-4">
          <button class="btn btn-continue" id="continueToForm" disabled>
            Continuar con plan seleccionado
            <i class="fas fa-arrow-right ms-2"></i>
          </button>
        </div>
      </div>

      <!-- PASO 2: FORMULARIO DE REGISTRO -->
      <div id="registrationForm" class="hidden">
        <div class="registration-card">
          <!-- Header -->
          <div class="header-section">
            <!-- Plan seleccionado -->
            <div class="selected-plan-info">
              <div class="d-flex justify-content-between align-items-center">
                <span id="selectedPlanName" class="fw-bold"></span>
                <button
                  type="button"
                  class="btn btn-sm btn-outline-light"
                  id="changePlan"
                >
                  Cambiar plan
                </button>
              </div>
              <div id="selectedPlanPrice" class="mt-1"></div>
            </div>

            <h2 class="mb-3">Completa tu informaci√≥n</h2>
            <p class="mb-0 opacity-90">Tu tienda estar√° lista en minutos</p>

            <div class="mt-4">
              <span class="feature-badge">
                <i class="fas fa-mobile-alt me-1"></i>
                Optimizado m√≥vil
              </span>
              <span class="feature-badge">
                <i class="fab fa-whatsapp me-1"></i>
                Integraci√≥n WhatsApp
              </span>
              <span class="feature-badge">
                <i class="fas fa-palette me-1"></i>
                Personalizable
              </span>
            </div>
          </div>

          <!-- Formulario -->
          <div class="form-section">
            <form id="storeRegistrationForm">
              <!-- Campo oculto para el plan -->
              <input type="hidden" id="selectedPlan" name="plan" />

              <!-- Nombre del comercio -->
              <div class="mb-3">
                <label for="nombreComercio" class="form-label fw-semibold">
                  Nombre del comercio <span class="text-danger">*</span>
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="nombreComercio"
                  placeholder="Nombre de mi comercio"
                  required
                />
              </div>

              <!-- Nombre de usuario (slug) -->
              <div class="mb-3">
                <label for="nombreUsuario" class="form-label fw-semibold">
                  Nombre de usuario <span class="text-danger">*</span>
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="nombreUsuario"
                  placeholder="mi-tienda"
                  required
                  pattern="[a-z0-9\-]+"
                  title="Solo letras min√∫sculas, n√∫meros y guiones"
                />
                <div class="preview-url">
                  <span class="base-url">mentes.tienda/</span>
                  <span class="user-slug" id="slugPreview">mi-tienda</span>
                </div>
                <small class="form-text text-muted"
                  >Solo letras min√∫sculas, n√∫meros y guiones</small
                >
              </div>

              <!-- Rubro del comercio -->
              <div class="mb-3">
                <label for="rubroComercio" class="form-label fw-semibold">
                  Rubro del comercio <span class="text-danger">*</span>
                </label>
                <select class="form-select" id="rubroComercio" required>
                  <option value="">Seleccione una categor√≠a</option>
                  <option value="Ropa y Accesorios">Ropa y Accesorios</option>
                  <option value="Electr√≥nicos">Electr√≥nicos</option>
                  <option value="Hogar y Jard√≠n">Hogar y Jard√≠n</option>
                  <option value="Deportes y Fitness">Deportes y Fitness</option>
                  <option value="Belleza y Cuidado Personal">
                    Belleza y Cuidado Personal
                  </option>
                  <option value="Libros y Educaci√≥n">Libros y Educaci√≥n</option>
                  <option value="Juguetes y Beb√©s">Juguetes y Beb√©s</option>
                  <option value="Automotriz">Automotriz</option>
                  <option value="Alimentos y Bebidas">
                    Alimentos y Bebidas
                  </option>
                  <option value="Arte y Manualidades">
                    Arte y Manualidades
                  </option>
                  <option value="Otro">Otro</option>
                </select>
              </div>

              <!-- WhatsApp -->
              <div class="mb-3">
                <label for="whatsappComercio" class="form-label fw-semibold">
                  WhatsApp donde recibir√°s los pedidos
                  <span class="text-danger">*</span>
                </label>
                <div class="input-group">
                  <select class="form-select country-select" id="codigoPais">
                    <option value="+54">üá¶üá∑ +54</option>
                    <option value="+1">üá∫üá∏ +1</option>
                    <option value="+52">üá≤üáΩ +52</option>
                    <option value="+57">üá®üá¥ +57</option>
                    <option value="+51">üáµüá™ +51</option>
                    <option value="+56">üá®üá± +56</option>
                    <option value="+598">üá∫üáæ +598</option>
                    <option value="+591">üáßüá¥ +591</option>
                    <option value="+34">üá™üá∏ +34</option>
                  </select>
                  <input
                    type="tel"
                    class="form-control phone-input"
                    id="whatsappComercio"
                    placeholder="1144440000"
                    required
                  />
                </div>
              </div>

              <!-- Pa√≠s -->
              <div class="mb-3">
                <label for="pais" class="form-label fw-semibold">
                  Pa√≠s <span class="text-danger">*</span>
                </label>
                <select class="form-select" id="pais" required>
                  <option value="">Selecciona un pa√≠s</option>
                  <option value="Argentina">üá¶üá∑ Argentina</option>
                  <option value="M√©xico">üá≤üáΩ M√©xico</option>
                  <option value="Colombia">üá®üá¥ Colombia</option>
                  <option value="Per√∫">üáµüá™ Per√∫</option>
                  <option value="Chile">üá®üá± Chile</option>
                  <option value="Uruguay">üá∫üáæ Uruguay</option>
                  <option value="Bolivia">üáßüá¥ Bolivia</option>
                  <option value="Espa√±a">üá™üá∏ Espa√±a</option>
                  <option value="Estados Unidos">üá∫üá∏ Estados Unidos</option>
                  <option value="Otro">üåç Otro</option>
                </select>
              </div>

              <!-- Email -->
              <div class="mb-4">
                <label for="email" class="form-label fw-semibold">
                  E-mail <span class="text-danger">*</span>
                </label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  placeholder="tu@email.com"
                  required
                />
                <small class="form-text text-muted"
                  >Te enviaremos las credenciales de acceso</small
                >
              </div>

              <!-- Contrase√±a -->
              <div class="mb-3">
                <label for="password" class="form-label fw-semibold">
                  Contrase√±a <span class="text-danger">*</span>
                </label>
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  placeholder="M√≠nimo 6 caracteres"
                  required
                  minlength="6"
                />
                <small class="form-text text-muted"
                  >Para acceder a tu panel de administraci√≥n</small
                >
              </div>

              <!-- Confirmar contrase√±a -->
              <div class="mb-4">
                <label for="confirmPassword" class="form-label fw-semibold">
                  Confirmar contrase√±a <span class="text-danger">*</span>
                </label>
                <input
                  type="password"
                  class="form-control"
                  id="confirmPassword"
                  placeholder="Repite tu contrase√±a"
                  required
                  minlength="6"
                />
              </div>

              <!-- T√©rminos y condiciones -->
              <div class="mb-4">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="terminos"
                    required
                  />
                  <label class="form-check-label" for="terminos">
                    Acepto los
                    <a href="#" class="text-decoration-none"
                      >t√©rminos y condiciones</a
                    >
                    y la
                    <a href="#" class="text-decoration-none"
                      >pol√≠tica de privacidad</a
                    >
                  </label>
                </div>
              </div>

              <!-- Bot√≥n submit -->
              <div class="d-grid">
                <button type="submit" class="btn btn-create" id="btnCrear">
                  <span id="btnText">
                    <i class="fas fa-store me-2"></i>
                    Crear mi tienda ahora
                  </span>
                  <span id="btnSpinner" class="d-none">
                    <span class="spinner-border spinner-border-sm me-2"></span>
                    Creando tienda...
                  </span>
                </button>
              </div>
            </form>

            <!-- Footer -->
            <div class="text-center mt-4 pt-4 border-top">
              <p class="text-muted mb-2">¬øYa tienes una tienda?</p>
              <a href="/admin/" class="btn btn-outline-primary">
                <i class="fas fa-sign-in-alt me-1"></i>
                Iniciar sesi√≥n
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript del registro -->
    <script>
      let selectedPlan = null;
      let checkSlugTimeout = null;

      // Lista de slugs reservados
      const RESERVED_SLUGS = [
        "admin",
        "api",
        "tienda",
        "www",
        "app",
        "mail",
        "ftp",
        "blog",
        "shop",
        "store",
        "help",
        "support",
        "login",
        "register",
        "signup",
        "dashboard",
        "panel",
        "config",
        "settings",
        "home",
        "index",
        "assets",
        "static",
        "public",
        "js",
        "css",
        "img",
        "images",
        "favicon",
        "robots",
        "sitemap",
        "manifest",
        "sw",
        "service-worker",
      ];

      // Funci√≥n para validar slug
      function validateSlug(slug) {
        if (!slug || slug.length < 3) {
          return {
            valid: false,
            message: "El nombre debe tener al menos 3 caracteres.",
          };
        }

        if (slug.length > 30) {
          return {
            valid: false,
            message: "El nombre no puede tener m√°s de 30 caracteres.",
          };
        }

        if (RESERVED_SLUGS.includes(slug.toLowerCase())) {
          return {
            valid: false,
            message: "Este nombre no est√° disponible. Prueba con otro.",
          };
        }

        return { valid: true, message: "" };
      }

      // Funci√≥n para verificar disponibilidad en el servidor
      async function checkSlugAvailability(slug) {
        try {
          const response = await fetch(`/api/check-slug/${slug}`);
          const data = await response.json();
          return data.available;
        } catch (error) {
          console.error("Error verificando slug:", error);
          return true; // En caso de error, asumir disponible
        }
      }

      // Funci√≥n para mostrar estado del slug
      function updateSlugStatus(slug, isValid, message, isChecking = false) {
        const input = document.getElementById("nombreUsuario");
        const preview = document.getElementById("slugPreview");
        let statusMsg = input.parentNode.querySelector(".slug-status");

        // Crear elemento de status si no existe
        if (!statusMsg) {
          statusMsg = document.createElement("small");
          statusMsg.className =
            "form-text slug-status d-flex align-items-center";
          input.parentNode.appendChild(statusMsg);
        }

        // Actualizar preview
        preview.textContent = slug || "mi-tienda";

        if (isChecking) {
          input.style.borderColor = "#ffc107";
          preview.style.color = "#ffc107";
          statusMsg.innerHTML =
            '<i class="fas fa-spinner fa-spin me-2"></i>Verificando disponibilidad...';
          statusMsg.className =
            "form-text slug-status text-warning d-flex align-items-center";
          input.setCustomValidity("Verificando...");
        } else if (!isValid) {
          input.style.borderColor = "#dc3545";
          preview.style.color = "#dc3545";
          statusMsg.innerHTML = `<i class="fas fa-times me-2"></i>${message}`;
          statusMsg.className =
            "form-text slug-status text-danger d-flex align-items-center";
          input.setCustomValidity(message);
        } else {
          input.style.borderColor = "#198754";
          preview.style.color = "#198754";
          statusMsg.innerHTML =
            '<i class="fas fa-check me-2"></i>Nombre disponible';
          statusMsg.className =
            "form-text slug-status text-success d-flex align-items-center";
          input.setCustomValidity("");
        }
      }

      // Manejo de selecci√≥n de planes
      document.querySelectorAll(".plan-card").forEach((card) => {
        card.addEventListener("click", function () {
          document
            .querySelectorAll(".plan-card")
            .forEach((c) => c.classList.remove("selected"));
          this.classList.add("selected");
          selectedPlan = this.dataset.plan;
          document.getElementById("continueToForm").disabled = false;
        });
      });

      document
        .getElementById("continueToForm")
        .addEventListener("click", function () {
          if (!selectedPlan) return;

          const mercadoPagoLinks = {
            pro: "https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=7d05725ee7cd4bfeb9e51950064053ad",
            jadebro:
              "https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=d9ce22909da241fa9685a78ef02621ff",
            "jadebro-max":
              "https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=22850705be3744a1b6f001eb9ec87030",
          };

          if (selectedPlan !== "gratis") {
            window.location.href = mercadoPagoLinks[selectedPlan];
            return;
          }

          document.getElementById("stepPlan").classList.remove("active");
          document.getElementById("stepInfo").classList.add("active");
          document.getElementById("planSelection").classList.add("hidden");
          document
            .getElementById("registrationForm")
            .classList.remove("hidden");

          const planInfo = getPlanInfo(selectedPlan);
          document.getElementById("selectedPlanName").textContent =
            planInfo.name;
          document.getElementById("selectedPlanPrice").textContent =
            planInfo.price;
          document.getElementById("selectedPlan").value = selectedPlan;

          window.scrollTo(0, 0);
        });
      // Cambiar plan
      document
        .getElementById("changePlan")
        .addEventListener("click", function () {
          document.getElementById("stepInfo").classList.remove("active");
          document.getElementById("stepPlan").classList.add("active");
          document.getElementById("registrationForm").classList.add("hidden");
          document.getElementById("planSelection").classList.remove("hidden");
          window.scrollTo(0, 0);
        });

      // Informaci√≥n de planes
      function getPlanInfo(plan) {
        const plans = {
          gratis: { name: "Plan Empezar", price: "GRATIS" },
          pro: { name: "Plan Comercio Pro", price: "$30.000 ARS/mes" },
          jadebro: { name: "Plan JadeBro IA", price: "$60.000 ARS/mes" },
          "jadebro-max": {
            name: "Plan JadeBro IA MAX",
            price: "$140.000 ARS/mes",
          },
        };
        return plans[plan] || { name: "Plan", price: "" };
      }

      // Preview del slug con validaci√≥n completa
      document
        .getElementById("nombreUsuario")
        .addEventListener("input", function () {
          const slug = this.value.toLowerCase().replace(/[^a-z0-9\-]/g, "");
          this.value = slug;

          // Limpiar timeout anterior
          if (checkSlugTimeout) {
            clearTimeout(checkSlugTimeout);
          }

          // Validaci√≥n inmediata
          const validation = validateSlug(slug);

          if (!validation.valid) {
            updateSlugStatus(slug, false, validation.message);
            return;
          }

          // Mostrar estado "verificando"
          updateSlugStatus(slug, false, "", true);

          // Verificar disponibilidad con debounce
          checkSlugTimeout = setTimeout(async () => {
            const isAvailable = await checkSlugAvailability(slug);

            if (isAvailable) {
              updateSlugStatus(slug, true, "Nombre disponible");
            } else {
              updateSlugStatus(
                slug,
                false,
                "Este nombre ya est√° en uso. Prueba con otro."
              );
            }
          }, 800); // Esperar 800ms despu√©s de que el usuario deje de escribir
        });

      // Env√≠o del formulario
      document
        .getElementById("storeRegistrationForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          // Verificar que el slug sea v√°lido
          const slugInput = document.getElementById("nombreUsuario");
          if (slugInput.checkValidity() === false) {
            alert("Por favor, elige un nombre de usuario v√°lido y disponible.");
            return;
          }

          // Verificar contrase√±as
          const password = document.getElementById("password").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;

          if (password !== confirmPassword) {
            alert("Las contrase√±as no coinciden");
            return;
          }

          // Mostrar loading
          document.getElementById("btnText").classList.add("d-none");
          document.getElementById("btnSpinner").classList.remove("d-none");
          document.getElementById("btnCrear").disabled = true;

          // Preparar datos
          const formData = {
            plan: selectedPlan,
            nombreComercio: document.getElementById("nombreComercio").value,
            nombreUsuario: document.getElementById("nombreUsuario").value,
            rubroComercio: document.getElementById("rubroComercio").value,
            whatsapp:
              document.getElementById("codigoPais").value +
              document.getElementById("whatsappComercio").value,
            pais: document.getElementById("pais").value,
            email: document.getElementById("email").value,
            password: password,
          };

          // Enviar al backend
          fetch("/api/auth/register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(formData),
          })
            .then((response) => response.json())
            .then((data) => {
              if (data.success) {
                alert(
                  "¬°Tienda creada exitosamente! Redirigiendo al panel de administraci√≥n..."
                );
                window.location.href = "/admin/";
              } else {
                throw new Error(data.message || "Error al crear la tienda");
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("Error al crear la tienda: " + error.message);
            })
            .finally(() => {
              // Restaurar bot√≥n
              document.getElementById("btnText").classList.remove("d-none");
              document.getElementById("btnSpinner").classList.add("d-none");
              document.getElementById("btnCrear").disabled = false;
            });
        });

      // Detectar par√°metro de plan en URL
      const urlParams = new URLSearchParams(window.location.search);
      const planFromUrl = urlParams.get("plan");

      if (planFromUrl) {
        const planCard = document.querySelector(`[data-plan="${planFromUrl}"]`);
        if (planCard) {
          planCard.click();
          setTimeout(() => {
            document.getElementById("continueToForm").click();
          }, 500);
        }
      }

      window.addEventListener("DOMContentLoaded", () => {
        const urlParams = new URLSearchParams(window.location.search);
        const paymentVerified = urlParams.get("payment_verified");
        const plan = urlParams.get("plan");
        const preapprovalId = urlParams.get("preapproval_id");

        if (paymentVerified === "true" && plan && plan !== "gratis") {
          selectedPlan = plan;

          if (preapprovalId) {
            const form = document.getElementById("storeRegistrationForm");
            const subInput = document.createElement("input");
            subInput.type = "hidden";
            subInput.name = "subscription_id";
            subInput.value = preapprovalId;
            form.appendChild(subInput);
          }

          document.getElementById("stepPlan").classList.add("d-none");
          document.getElementById("stepInfo").classList.add("active");
          document.getElementById("planSelection").classList.add("hidden");
          document
            .getElementById("registrationForm")
            .classList.remove("hidden");

          const planInfo = getPlanInfo(plan);
          document.getElementById("selectedPlanName").textContent =
            planInfo.name;
          document.getElementById("selectedPlanPrice").textContent =
            planInfo.price;
          document.getElementById("selectedPlan").value = plan;

          const alert = document.createElement("div");
          alert.className = "alert alert-success mb-3";
          alert.innerHTML =
            '<i class="fas fa-check-circle me-2"></i>Pago aprobado. Completa tu registro.';
          document.querySelector(".form-section").prepend(alert);

          window.scrollTo(0, 0);
        }
      });

      // ========== CREAR PART√çCULAS DORADAS ==========
      function createParticles() {
        const container = document.getElementById("particles");
        if (!container) return;

        const particleCount = 30;

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";

          const size = Math.random() * 6 + 2;
          particle.style.width = size + "px";
          particle.style.height = size + "px";

          particle.style.left = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 15 + "s";
          particle.style.animationDuration = Math.random() * 10 + 10 + "s";

          container.appendChild(particle);
        }
      }

      // Inicializar part√≠culas
      document.addEventListener("DOMContentLoaded", function () {
        createParticles();
      });
    </script>
  </body>
</html>
